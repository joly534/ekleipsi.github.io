<html>
    <head>
        <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    </head>
    <body>
        <a-scene  loading-screen="dotsColor: red; background="color: darkgrey">

            <assets>
                <img id="sol" src="assets/textures/sol_marbre.jpg">
                <img id="wall" src="assets/textures/wall.jpg">
            </assets>

            <a-light light="type: spot; color: white; castShadow:true" position="-3.5 2 -5" intensity="0.1"></a-light>
            <a-light light="type: spot; color: white; castShadow:true" position="3.5 2 -5" intensity="0.1"></a-light>
            <a-light light="type: spot; color: white; castShadow:true" position="-3.5 2 -3" intensity="0.3"></a-light>
            <a-light light="type: spot; color: white; castShadow:true" position="3.5 2 -3" intensity="0.3"></a-light>
            <a-light light="type: spot; color: white; castShadow:true" position="-3.5 2 -1" intensity="0.4"></a-light>
            <a-light light="type: spot; color: white; castShadow:true" position="3.5 2 -1" intensity="0.4"></a-light>
            <a-light light="type: spot; color: white; castShadow:true" position="-3.5 2 -4" intensity="0.2"></a-light>
            <a-light light="type: spot; color: white; castShadow:true" position="3.5 2 -4" intensity="0.2"></a-light>

            <!--SOL ET PLAFOND-->
            <a-plane color="white" height="8" width="15" position="0 0 -4" rotation="-90 0 90" src="#sol" repeat="10 10" shadow="receive:true"></a-plane>
            <a-plane color="white" height="8" width="15" position="0 4.5 -4" rotation="90 0 -90" src="#wall" repeat="4 4" shadow="receive:true"></a-plane>

            <!--MUR DROIT-->
            <a-plane color="white" height="5" width="15" position="-4 2 -4" rotation="0 90 0" src="#wall" repeat="4 4" shadow="receive:true"></a-plane>
            <!--MUR GAUCHE-->
            <a-plane color="white" height="5" width="15" position="4 2 -4" rotation="0 -90 0" src="#wall" repeat="4 4" shadow="receive:true"></a-plane>
            <!--MUR DEVANT-->
            <a-plane color="white" height="5" width="8" position="0 2 -11.5" rotation="0 0 0" src="#wall" repeat="4 4" shadow="receive:true"></a-plane>
            <!--MUR DERRIERE-->
            <a-plane color="white" height="5" width="8" position="0 2 3.5" rotation="0 180 0" src="#wall" repeat="4 4" shadow="receive:true"></a-plane>

            <!--Monster-->
            <a-obj-model src="assets/obj/monster/Hellknight_LATEST.obj" 
            mtl="assets/obj/monster/Hellknight_LATEST.mtl" 
            position="0 1.4 -5" scale="1 1 1" shadow="cast: true"></a-obj-model>

            <a-entity oculus-touch-controls="hand: left" thumbstick-logging></a-entity>
            <a-entity oculus-touch-controls="hand: right" thumbstick-logging></a-entity>

            <script>

                AFRAME.registerComponent('thumbstick-logging',{
                    init: function () {
                      this.el.addEventListener('thumbstickmoved', this.logThumbstick);
                    },
                    logThumbstick: function (evt) {
                      if (evt.detail.y > 0.95) { console.log("DOWN"); }
                      if (evt.detail.y < -0.95) { console.log("UP"); }
                      if (evt.detail.x < -0.95) { console.log("LEFT"); }
                      if (evt.detail.x > 0.95) { console.log("RIGHT"); }
                    }
                  });
                  
            </script>
            <a-obj-model src="/assets/obj/controllers/oculus-touch-controller-left.obj" 
                        mtl="/assets/obj/controllers/controllers/oculus-touch-controller-left.mtl" 
                        position="-1 0 -3" scale="1 1 1"></a-obj-model>

            <a-obj-model src="assets/obj/controllers/oculus-touch-controller-right.obj" 
            mtl="assets/obj/controllers/controllers/oculus-touch-controller-right.mtl" 
            position="1 0 -3" scale="1 1 1"></a-obj-model>
        </a-scene>
    </body>
</html>